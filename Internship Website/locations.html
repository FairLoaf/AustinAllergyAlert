<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Homepage</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="background.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/
css/font-awesome.min.css">
  <script type="text/javascript">
    function initMap() {
      var mapOptions =
      {
        center: new google.maps.LatLng("30.2672", "-97.7431"),
        zoom: 12
      }
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);
      map.data.loadGeoJson("fixedlocations.geojson")
      var infowindow = new google.maps.InfoWindow();
      map.data.addListener('click', function (event) {
        ;
        name = event.feature.getProperty('Name');
        addy = event.feature.getProperty('Address');
        num = event.feature.getProperty('Website');
        web = event.feature.getProperty('Phone Number');
        if (web.includes(".com")) {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>" + "<a href = 'web'>" + web + "<br></a>");
        }
        else {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>");
        }
        infowindow.setPosition(event.feature.getGeometry().get());
        infowindow.setOptions({ pixelOffset: new google.maps.Size(0, -30) });
        infowindow.open(map);
      });
    }
    x = navigator.geolocation;
    x.getCurrentPosition(success, failure);
    function success(position) {
      var myLat = position.coords.latitude;
      var myLong = position.coords.longitude;
      var coords = new google.maps.LatLng(myLat, myLong);
      var mapOptions =
      {
        center: new google.maps.LatLng(coords),
        zoom: 14
      }
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);
      var markerOptions =
      {
        position: new google.maps.LatLng(coords),
        map: map,
        icon: href = "images/usermarker.jpg",
        animation: google.maps.Animation.DROP
      }
      var marker = new google.maps.Marker(markerOptions);
      var infowindow = new google.maps.InfoWindow();
      map.data.addListener('click', function (event) {
        ;
        name = event.feature.getProperty('Name');
        addy = event.feature.getProperty('Address');
        num = event.feature.getProperty('Website');
        web = event.feature.getProperty('Phone Number');
        if (web.includes(".com")) {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>" + "<a href = 'web'>" + web + "<br></a>");
        }
        else {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>");
        }
        infowindow.setPosition(event.feature.getGeometry().get());
        infowindow.setOptions({ pixelOffset: new google.maps.Size(0, -30) });
        infowindow.open(map);
      });
      map.data.loadGeoJson("fixedlocations.geojson")
    }
    function failure() {
      var mapOptions =
      {
        center: new google.maps.LatLng("30.2672", "-97.7431"),
        zoom: 12
      }
      var map = new google.maps.Map(document.getElementById("map"), mapOptions);
      map.data.loadGeoJson("fixedlocations.geojson")
      var infowindow = new google.maps.InfoWindow();
      map.data.addListener('click', function (event) {
        ;
        name = event.feature.getProperty('Name');
        addy = event.feature.getProperty('Address');
        num = event.feature.getProperty('Website');
        web = event.feature.getProperty('Phone Number');
        if (web.includes(".com")) {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>" + "<a href = 'web'>" + web + "<br></a>");
        }
        else {
          infowindow.setContent("<h1>" + name + "</h1>" + "<a>" + addy + "<br></a>" + "<a>" + num + "<br></a>");
        }
        infowindow.setPosition(event.feature.getGeometry().get());
        infowindow.setOptions({ pixelOffset: new google.maps.Size(0, -30) });
        infowindow.open(map);
      });
      alert("We can't access your location!")
    }
  </script>
</head>

<body>
  <section class="header">
    <nav>
      <a href="index.html"><img src="images/logo.jpg" width="50" height="50"></a>
      <div class="nav-links" id="navLinks">
        <i class="fa fa-times" onclick="hideMenu()"></i>
        <ul>
          <li><a href="index.html">HOME</a></li>
          <li><a href="aboutus.html">ABOUT US</a></li>
          <li><a href="allergeninformation.html">ALLERGEN INFORMATION</a></li>
          <li><a href="contact.html">CONTACT</a></li>
          <li><a href="locations.html">LOCATIONS</a></li>
          <li><a href="test.html">WEB TEST</a></li>
        </ul>
        <hr>
      </div>
      <i class="fa fa-bars" onclick="showMenu()"></i>
    </nav>
  </section>
  <section class="main">
    <div class="text-box" style="margin-top: 50">
      <h1>Find a Clinic Near You</h1>
      <div id="map"></div>
    </div>
  </section>
  <script src="main.js"></script>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDflio94XJ_G_wOGtXVapVc2HsPq3VHI7c&libraries=places&callback=initMap">
    </script>
</body>

</html>